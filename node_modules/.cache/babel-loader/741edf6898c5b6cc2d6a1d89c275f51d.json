{"ast":null,"code":"import _defineProperty from \"/Users/drashti/Documents/Drashti workshop/assessment---kwitter-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(source, true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(source).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport { domain, jsonHeaders, handleJsonResponse } from \"./constants\";\nimport { GETUSER, CREATEUSER, DELETEUSER, LOGOUT, PUTUSERPICTURE, UPDATEUSERINFO } from \"../actionTypes\";\nimport { login } from \"./auth\";\nvar url = domain + \"/users\";\nexport var getUser = function getUser(userName) {\n  return function (dispatch) {\n    dispatch({\n      type: GETUSER.START\n    });\n    return fetch(url + \"/\" + userName, {\n      method: \"GET\",\n      headers: jsonHeaders\n    }).then(handleJsonResponse).then(function (result) {\n      return dispatch({\n        type: GETUSER.SUCCESS,\n        payload: result\n      });\n    }).catch(function (err) {\n      return Promise.reject(dispatch({\n        type: GETUSER.FAIL,\n        payload: err\n      }));\n    });\n  };\n};\n\nvar _createUser = function _createUser(registerData) {\n  return function (dispatch) {\n    dispatch({\n      type: CREATEUSER.START\n    });\n    return fetch(url, {\n      method: \"POST\",\n      headers: jsonHeaders,\n      body: JSON.stringify(registerData)\n    }).then(handleJsonResponse).then(function (result) {\n      return dispatch({\n        type: CREATEUSER.SUCCESS,\n        payload: result\n      });\n    }).catch(function (err) {\n      return Promise.reject(dispatch({\n        type: CREATEUSER.FAIL,\n        payload: err\n      }));\n    });\n  };\n};\n\nexport var createUser = function createUser(registerData) {\n  return function (dispatch, getState) {\n    return dispatch(_createUser(registerData)).then(function () {\n      return dispatch(login({\n        username: registerData.username,\n        password: registerData.password\n      }));\n    }).then(function () {\n      return dispatch({\n        type: LOGOUT.SUCCESS,\n        payload: {\n          statusCode: 200\n        }\n      });\n    });\n  };\n};\nexport var deleteUser = function deleteUser() {\n  return function (dispatch, getState) {\n    dispatch({\n      type: DELETEUSER.START\n    });\n    var _getState$auth$login$ = getState().auth.login.result,\n        username = _getState$auth$login$.username,\n        token = _getState$auth$login$.token;\n    return fetch(url + \"/\" + username, {\n      method: \"DELETE\",\n      headers: _objectSpread({\n        Authorization: \"Bearer \" + token\n      }, jsonHeaders)\n    }).then(handleJsonResponse).then(function (result) {\n      return dispatch({\n        type: DELETEUSER.SUCCESS,\n        payload: result\n      });\n    }).catch(function (err) {\n      return Promise.reject(dispatch({\n        type: DELETEUSER.FAIL,\n        payload: err\n      }));\n    }).then(function () {\n      return dispatch({\n        type: LOGOUT.SUCCESS,\n        payload: {\n          statusCode: 200\n        }\n      });\n    });\n  };\n};\nexport var updateUserInfo = function updateUserInfo(_ref) {\n  var username = _ref.username,\n      displayName = _ref.displayName,\n      about = _ref.about,\n      password = _ref.password;\n  return function (dispatch, getState) {\n    var token = getState().auth.login.result.token;\n    var body = {\n      password: password,\n      about: about,\n      displayName: displayName\n    };\n    dispatch({\n      type: UPDATEUSERINFO.START\n    });\n    fetch(url + \"/\" + username, {\n      method: \"PATCH\",\n      headers: _objectSpread({\n        Authorization: \"Bearer \" + token\n      }, jsonHeaders),\n      body: JSON.stringify(body)\n    }).then(handleJsonResponse).then(function (result) {\n      return dispatch({\n        type: UPDATEUSERINFO.SUCCESS,\n        payload: result\n      });\n    }).catch(function (err) {\n      return Promise.reject(dispatch({\n        type: UPDATEUSERINFO.FAIL,\n        payload: err\n      }));\n    });\n  };\n};\nexport var _putUserPicture = function _putUserPicture(formData) {\n  return function (dispatch, getState) {\n    dispatch({\n      type: PUTUSERPICTURE.START\n    });\n    var _getState$auth$login$2 = getState().auth.login.result,\n        username = _getState$auth$login$2.username,\n        token = _getState$auth$login$2.token;\n    return fetch(url + \"/\" + username + \"/picture\", {\n      method: \"PUT\",\n      headers: {\n        Authorization: \"Bearer \" + token,\n        Accept: \"application/json\"\n      },\n      body: formData\n    }).then(handleJsonResponse).then(function (result) {\n      return dispatch({\n        type: PUTUSERPICTURE.SUCCESS,\n        payload: result\n      });\n    }).catch(function (err) {\n      return Promise.reject(dispatch({\n        type: PUTUSERPICTURE.FAIL,\n        payload: err\n      }));\n    });\n  };\n};\nexport var putUserPicture = function putUserPicture(formData, userId) {\n  return function (dispatch) {\n    return dispatch(_putUserPicture(formData)).then(function () {\n      return dispatch(getUser(userId));\n    });\n  };\n};","map":{"version":3,"sources":["/Users/drashti/Documents/Drashti workshop/assessment---kwitter-frontend/src/redux/actionCreators/users.js"],"names":["domain","jsonHeaders","handleJsonResponse","GETUSER","CREATEUSER","DELETEUSER","LOGOUT","PUTUSERPICTURE","UPDATEUSERINFO","login","url","getUser","userName","dispatch","type","START","fetch","method","headers","then","result","SUCCESS","payload","catch","err","Promise","reject","FAIL","_createUser","registerData","body","JSON","stringify","createUser","getState","username","password","statusCode","deleteUser","auth","token","Authorization","updateUserInfo","displayName","about","_putUserPicture","formData","Accept","putUserPicture","userId"],"mappings":"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","sourcesContent":["import { domain, jsonHeaders, handleJsonResponse } from \"./constants\";\nimport {\n  GETUSER,\n  CREATEUSER,\n  DELETEUSER,\n  LOGOUT,\n  PUTUSERPICTURE,\n  UPDATEUSERINFO\n} from \"../actionTypes\";\n\nimport { login } from \"./auth\";\n\nconst url = domain + \"/users\";\n\nexport const getUser = userName => dispatch => {\n  dispatch({\n    type: GETUSER.START\n  });\n\n  return fetch(url + \"/\" + userName, {\n    method: \"GET\",\n    headers: jsonHeaders\n  })\n    .then(handleJsonResponse)\n    .then(result => {\n      return dispatch({\n        type: GETUSER.SUCCESS,\n        payload: result\n      });\n    })\n    .catch(err => {\n      return Promise.reject(dispatch({ type: GETUSER.FAIL, payload: err }));\n    });\n};\n\nconst _createUser = registerData => dispatch => {\n  dispatch({ type: CREATEUSER.START });\n\n  return fetch(url, {\n    method: \"POST\",\n    headers: jsonHeaders,\n    body: JSON.stringify(registerData)\n  })\n    .then(handleJsonResponse)\n    .then(result => {\n      return dispatch({\n        type: CREATEUSER.SUCCESS,\n        payload: result\n      });\n    })\n    .catch(err => {\n      return Promise.reject(dispatch({ type: CREATEUSER.FAIL, payload: err }));\n    });\n};\n\nexport const createUser = registerData => (dispatch, getState) => {\n  return dispatch(_createUser(registerData))\n    .then(() =>\n      dispatch(\n        login({\n          username: registerData.username,\n          password: registerData.password\n        })\n      )\n    )\n    .then(() => {\n      return dispatch({\n        type: LOGOUT.SUCCESS,\n        payload: { statusCode: 200 }\n      });\n    });\n};\n\nexport const deleteUser = () => (dispatch, getState) => {\n  dispatch({ type: DELETEUSER.START });\n\n  const { username, token } = getState().auth.login.result;\n\n  return fetch(url + \"/\" + username, {\n    method: \"DELETE\",\n    headers: { Authorization: \"Bearer \" + token, ...jsonHeaders }\n  })\n    .then(handleJsonResponse)\n    .then(result => {\n      return dispatch({\n        type: DELETEUSER.SUCCESS,\n        payload: result\n      });\n    })\n    .catch(err => {\n      return Promise.reject(dispatch({ type: DELETEUSER.FAIL, payload: err }));\n    })\n    .then(() => {\n      return dispatch({\n        type: LOGOUT.SUCCESS,\n        payload: { statusCode: 200 }\n      });\n    });\n};\n\nexport const updateUserInfo = ({ username, displayName, about, password }) => (\n  dispatch,\n  getState\n) => {\n  const token = getState().auth.login.result.token;\n  const body = {\n    password: password,\n    about: about,\n    displayName: displayName\n  };\n  dispatch({ type: UPDATEUSERINFO.START });\n  fetch(url + \"/\" + username, {\n    method: \"PATCH\",\n    headers: { Authorization: \"Bearer \" + token, ...jsonHeaders },\n    body: JSON.stringify(body)\n  })\n\n    .then(handleJsonResponse)\n    .then(result => {\n      return dispatch({\n        type: UPDATEUSERINFO.SUCCESS,\n        payload: result\n      });\n    })\n    .catch(err => {\n      return Promise.reject(\n        dispatch({\n          type: UPDATEUSERINFO.FAIL,\n          payload: err\n        })\n      );\n    });\n};\n\n\nexport const _putUserPicture = formData => (dispatch, getState) => {\n  dispatch({ type: PUTUSERPICTURE.START });\n\n  const { username, token } = getState().auth.login.result;\n\n  return fetch(url + \"/\" + username + \"/picture\", {\n    method: \"PUT\",\n    headers: {\n      Authorization: \"Bearer \" + token,\n      Accept: \"application/json\"\n    },\n    body: formData\n  })\n    .then(handleJsonResponse)\n    .then(result => {\n      return dispatch({\n        type: PUTUSERPICTURE.SUCCESS,\n        payload: result\n      });\n    })\n    .catch(err => {\n      return Promise.reject(\n        dispatch({ type: PUTUSERPICTURE.FAIL, payload: err })\n      );\n    });\n};\n\nexport const putUserPicture = (formData, userId) => dispatch => {\n  return dispatch(_putUserPicture(formData)).then(() => {\n    return dispatch(getUser(userId));\n  });\n};\n"]},"metadata":{},"sourceType":"module"}